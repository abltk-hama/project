# [PROJECT]: Differential Drive Control Framework
[PURPOSE]:
  å·®å‹•äºŒè¼ªãƒ­ãƒœãƒƒãƒˆã®çµŒè·¯è¿½å¾“ãŠã‚ˆã³ç›®çš„åœ°ç‚¹ãƒ¢ãƒ¼ãƒ‰åˆ¶å¾¡ã‚’çµ±åˆçš„ã«æ‰±ã†ã‚·ã‚¹ãƒ†ãƒ ã€‚
  ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã¨å®Ÿæ©Ÿå‹•ä½œã®ä¸¡æ–¹ã‚’åŒä¸€è¨­è¨ˆã§æ¤œè¨¼å¯èƒ½ã€‚

[RESPONSIBILITY]:
  - çµŒè·¯è¿½å¾“ãƒ¢ãƒ¼ãƒ‰ï¼ˆPath Followingï¼‰ãŠã‚ˆã³ç›®çš„åœ°ç‚¹ãƒ¢ãƒ¼ãƒ‰ï¼ˆPose Regulation, Dubins Pathï¼‰ã®åˆ¶å¾¡çµ±åˆã€‚
  - ç‰©ç†ãƒ¢ãƒ‡ãƒ«ãƒ»çµŒè·¯ç”Ÿæˆãƒ»åˆ¶å¾¡å‰‡ãƒ»æœ€é©åŒ–ãƒ»ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã®å…¨å±¤æ§‹é€ ã‚’æ˜ç¢ºåŒ–ã€‚
  - å®Ÿæ©Ÿåˆ¶å¾¡ (`RealVehicle`) ã¨ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ (`PhysicsModel`) ã®åˆ‡æ›¿ã‚’çµ±ä¸€ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã§å®Ÿç¾ã€‚

[HIERARCHY]:
  - config/      â†’ å®šæ•°ãƒ»ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿è¨­å®š  
  - models/      â†’ è»Šä¸¡é‹å‹•ãƒ¢ãƒ‡ãƒ«ãƒ»å¹¾ä½•è¨ˆç®—ãƒ»å®Ÿæ©ŸI/F  
  - trajectory/  â†’ çµŒè·¯ç”Ÿæˆã¨è£œåŠ©æ¼”ç®—  
  - controllers/ â†’ åˆ¶å¾¡ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ï¼ˆè¿½å¾“ãƒ»ç›®çš„åœ°ãƒ»é©å¿œåˆ¶å¾¡ï¼‰  
  - sim/         â†’ ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³çµ±åˆãƒ»çµæœç®¡ç†  
  - docs/        â†’ ç†è«–ã€é–‹ç™ºæ–¹é‡ã€ä»•æ§˜ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆç¾¤  

---

## ğŸ§­ éšå±¤æ§‹é€ ã®ä¾å­˜ãƒãƒƒãƒ—ï¼ˆè¦–è¦šåŒ– + æ©Ÿæ¢°å¯èª­ï¼‰

```mermaid
graph TD
    config --> models;
    models --> trajectory;
    trajectory --> controllers;
    controllers --> sim;
    docs --- controllers;
    docs --- models;
    docs --- trajectory;
```

- **ä¸Šä½å±¤**ï¼ˆcontrollers, simï¼‰ã¯ã€**ä¸‹ä½å±¤ã®å‡ºåŠ›ã‚’åˆ©ç”¨**ã—ã¦å‹•ä½œã€‚  
- **docs** ã¯å…¨ä½“ã‚’æ¨ªæ–­ã™ã‚‹ç†è«–ãƒ»è¨­è¨ˆçŸ¥è­˜ã‚’ä¿æŒã€‚

---

## ğŸ”— ä¾å­˜é–¢ä¿‚ä¸€è¦§ï¼ˆAIç”¨æ§‹é€ ã‚¿ã‚°ï¼‰

| ä¸Šä½ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ« | ä¾å­˜ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ« | ä¾å­˜ç¨®åˆ¥ | ç›®çš„ |
|:--|:--|:--|:--|
| `controllers` | `models.physics` | data | è»Šä¸¡çŠ¶æ…‹æ›´æ–°ç”¨ |
| `controllers` | `models.geometry` | math | èª¤å·®è¨ˆç®— |
| `controllers` | `trajectory.utils` | data | çµŒè·¯ç‚¹ãƒ»æ¥ç·šæƒ…å ±å–å¾— |
| `sim` | `controllers` | control | åˆ¶å¾¡å®Ÿè¡Œ |
| `sim` | `models` | physics | çŠ¶æ…‹æ›´æ–° |
| `sim` | `trajectory` | path | çµŒè·¯å…¥åŠ› |
| `models.physics` | `config.constants` | param | ç‰©ç†ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿å‚ç…§ |
| `models.real_vehicle` | `config.controller_params` | param | ãƒ¢ãƒ¼ã‚¿ãƒ¼è¨­å®š |

---

## âš™ï¸ å„éšå±¤ã®å½¹å‰²æ¦‚è¦

| éšå±¤ | ä¸»ãªè²¬å‹™ | ä»£è¡¨ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ« | å‡ºåŠ› | è£œè¶³ |
|:--|:--|:--|:--|:--|
| `config/` | ã‚·ã‚¹ãƒ†ãƒ å…±é€šãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ç®¡ç† | constants.py | å®šæ•°ç¾¤ | ã‚³ãƒ¼ãƒ‰å…¨ä½“ã§å‚ç…§ã•ã‚Œã‚‹ |
| `models/` | ç‰©ç†ãƒ»å¹¾ä½•ãƒ»å®Ÿæ©Ÿãƒ¢ãƒ‡ãƒ« | physics.py, geometry.py | çŠ¶æ…‹(x, y, Î¸) | åˆ¶å¾¡å…¥åŠ›ã‚’å—ã‘ã¦ç‰©ç†æŒ™å‹•ã‚’ç”Ÿæˆ |
| `trajectory/` | çµŒè·¯ç”Ÿæˆãƒ»è£œé–“ãƒ»å§¿å‹¢æƒ…å ±ç®—å‡º | planner.py, utils.py | çµŒè·¯ç‚¹åˆ—, æ›²ç‡ | çµŒè·¯ãƒ‡ãƒ¼ã‚¿ã®ä¸­é–“è¡¨ç¾å±¤ |
| `controllers/` | åˆ¶å¾¡ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ å…¨èˆ¬ | path_follow.py, pose_regulation.py | (v, Î´) | çµŒè·¯æƒ…å ±ï¼‹èª¤å·®ã«åŸºã¥ãå…¥åŠ›ç”Ÿæˆ |
| `sim/` | çµ±åˆå®Ÿè¡Œã¨ãƒ¢ãƒ¼ãƒ‰ç®¡ç† | simulation.py, vehicle_manager.py | ãƒ­ã‚°, çŠ¶æ…‹å±¥æ­´ | å…¨å±¤ã‚’æŸã­ã‚‹å®Ÿè¡Œã‚¨ãƒ³ãƒˆãƒª |
| `docs/` | ç†è«–ãƒ»é–‹ç™ºæ–¹é‡ãƒ»ä»•æ§˜ | control_theory.md, development_policy.md | è¨­è¨ˆçŸ¥è­˜ | ã‚³ãƒ¼ãƒ‰å¤–éƒ¨çŸ¥è­˜ã¨ã—ã¦å‚ç…§ |

---

## ğŸ§  AIè£œåŠ©å‘ã‘ãƒ¡ãƒ¢
- **AIã«ã¨ã£ã¦ã®è§£æãƒ«ãƒ¼ãƒˆ**  
  1. `STRUCTURE.md` â†’ å…¨ä½“æ§‹é€ ã®ä¾å­˜ã¨è²¬å‹™ã‚’æŠŠæ¡  
  2. å„éšå±¤ã® md (`controllers.md`, `models.md` â€¦) ã‚’å‚ç…§ã—ã¦é–¢æ•°ç²’åº¦ã«é™ã‚Šã‚‹  
  3. `docs/control_theory.md` ã‚’å‚ç…§ã—ã¦æ•°ç†çš„æ ¹æ‹ ã‚’ç¢ºèª  

- **è§£æãƒ¢ãƒ¼ãƒ‰ä¾‹**
  - ã€Œåˆ¶å¾¡å‰‡ã®æ”¹å–„ã€ â†’ `controllers` ã¨ `models.geometry` ã‚’ä¸­å¿ƒã«åˆ†æ  
  - ã€ŒçµŒè·¯å¾©å¸°å‹•ä½œã®èª¿æ•´ã€ â†’ `trajectory` ã¨ `controllers.pose_regulation`  
  - ã€Œç‰©ç†ãƒ¢ãƒ‡ãƒ«å·®ç•°ï¼ˆå®Ÿæ©Ÿ vs simï¼‰ã€ â†’ `models.physics` ã¨ `models.real_vehicle`  
  - ã€Œæœ€é©åŒ–ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ èª¿æ•´ã€ â†’ `controllers.pso_adapt` ã¨ `docs/optimization.md`

---

## ğŸ§© ä»Šå¾Œã®æ‹¡å¼µäºˆå®š
- `/learning/` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’è¿½åŠ ã—ã€å¼·åŒ–å­¦ç¿’ãƒ»PSOæ¯”è¼ƒå®Ÿé¨“ã‚’ç®¡ç†äºˆå®šã€‚  
- å®Ÿæ©Ÿã‚»ãƒ³ã‚µãƒ¼çµ±åˆå±¤ `/sensors/` ã®æ–°è¨­ï¼ˆIMU, ç£æ°—ã‚»ãƒ³ã‚µãƒ¼å¯¾å¿œï¼‰ã€‚  
- `/tests/` ã«çµ±åˆå›å¸°ãƒ†ã‚¹ãƒˆã‚’è¿½åŠ ã—ã€å†ç¾æ€§ã‚’è‡ªå‹•ç¢ºèªã€‚

---

## ğŸ—‚ï¸ ç®¡ç†æ–¹é‡ï¼ˆäººé–“ã¨AIã®å…±é€šç†è§£ï¼‰

| ç¨®åˆ¥ | ç®¡ç†å¯¾è±¡ | å¤‰æ›´å˜ä½ | æ›´æ–°ãƒ«ãƒ¼ãƒ« |
|:--|:--|:--|:--|
| ã‚³ãƒ¼ãƒ‰ | `.py` å„éšå±¤ | é–¢æ•°å˜ä½ | VSCodeã§é–‹ç™ºãƒ»Gitç®¡ç† |
| æ§‹é€ æƒ…å ± | å„éšå±¤ã® `.md` | ãƒ•ã‚¡ã‚¤ãƒ«å˜ä½ | ã‚³ãƒ¼ãƒ‰å¤‰æ›´æ™‚ã«æ›´æ–° |
| ç†è«–ï¼æ–¹é‡ | `docs/` | ç« å˜ä½ | ç†è«–æ›´æ–°ã‚„ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ è¿½åŠ æ™‚ |
| å…¨ä½“æ§‹é€  | `STRUCTURE.md` | éšå±¤å˜ä½ | éšå±¤è¿½åŠ ãƒ»å‰Šé™¤æ™‚ã«æ›´æ–° |

---

## âœ… è¦ç´„
> **STRUCTURE.md ã¯ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå…¨ä½“ã®ã€Œæ§‹é€ ï¼‹ä¾å­˜ï¼‹è²¬å‹™ã€ã‚’ç¤ºã™å”¯ä¸€ã®ä¿¯ç°å›³ã€‚**  
> äººé–“ã«ã¨ã£ã¦ã¯ã€Œå…¨ä½“åƒã®å…¥å£ã€ã€AIã«ã¨ã£ã¦ã¯ã€Œæ§‹é€ ç†è§£ã®èµ·ç‚¹ã€ã€‚

---

## [STRUCTURE OVERVIEW]

```
project/
â”œâ”€â”€ config/
â”‚   â””â”€â”€ config.md
â”œâ”€â”€ controllers/
â”‚   â””â”€â”€ controllers.md
â”œâ”€â”€ models/
â”‚   â”œâ”€â”€ interfaces.py          â† å…±é€šã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ï¼ˆæ–°è¦ï¼‰
â”‚   â”œâ”€â”€ physics.py
â”‚   â””â”€â”€ real_vehicle/
â”‚       â”œâ”€â”€ real_vehicle.py
â”‚       â””â”€â”€ param_defs.py      â† ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿å®šç¾©ï¼ˆæ—§param_ids.pyçµ±åˆï¼‰
â”œâ”€â”€ sim/
â”‚   â””â”€â”€ simulation.py
â”œâ”€â”€ trajectory/
â”‚   â””â”€â”€ trajectory_loader.py
â””â”€â”€ docs/
    â”œâ”€â”€ STRUCTURE.md
    â”œâ”€â”€ control_theory.md
    â”œâ”€â”€ models.md
    â””â”€â”€ sim.md
```

---

## [UPDATE LOG]
- **2025-10-09**  
  - `models/interfaces.py` ã‚’æ–°è¦è¿½åŠ ã€‚  
  - `real_vehicle/param_defs.py` ã‚’ `param_ids.py` ã‹ã‚‰ç§»å‹•ãƒ»å†æ§‹æˆã€‚  
  - `simulation.py` ãŒ `VehicleInterface` ã«åŸºã¥ãå‹•çš„åˆ‡æ›¿ã«å¯¾å¿œã€‚
