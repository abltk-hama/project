# ai_control_guidelines.md
\---

## [PURPOSE]
本ファイルは、AIが制御アルゴリズムの検討・コード生成・最適化を行う際に  
遵守すべき理論的・構造的・安全的ルールを定義する。

---

## [1. THEORETICAL INTEGRITY（理論整合性）]
1. AIは常に `docs/control_theory.md` の内容に整合させる。  
2. 理論提案時は「なぜ」「どの条件で有効か」を数理的背景とともに記述する。  
3. 近似・補正式を提示する際は、対象パラメータの範囲を明示する。

---

## [2. STRUCTURAL CONSISTENCY（構造整合性）]
1. すべての提案・コード生成は `docs/STRUCTURE.md` に定義された階層依存を前提とする。  
2. 階層外への直接アクセス（例：controllers → i2c）は禁止。  
3. 各階層 `.md` の [RESPONSIBILITY] に従い、責務を逸脱する関数を追加しない。

---

## [3. IMPLEMENTATION POLICY（実装指針）]
1. **出力順序:** 理論 → 構造 → 関数仕様 → コード の順で記述。  
2. コードは Python 3.10+ 準拠。docstring と型ヒントを必須とする。  
3. ファイル名・関数名は一貫性を保ち、STRUCTURE.md と衝突しないようにする。  
4. AIは実装前に理論的整合と安全性を確認し、必要に応じてユーザーへ確認を行う。

---

## [4. SAFETY POLICY（安全規範）]
1. 実機操作（I2C, GPIO, モータ制御など）は `models.real_vehicle` 経由のみ許可。  
2. 外部通信・ファイル書き換え・強制停止系関数は提案禁止。  
3. 実験用コードを出力する際は安全コメント（例：`# 実機テスト時はOFFにすること`）を挿入する。

---

## [5. OPTIMIZATION & ADAPTATION]
1. AIは最適化アルゴリズム（PSO, RLなど）を設計する際、`controllers.pso_adapt` を参照する。  
2. 既存パラメータを動的に最適化する場合は `config.md` の制約条件を考慮する。  
3. 学習過程や評価関数の改良は理論背景を伴う提案に限定する。

---

## [6. REVIEW & REVISION]
1. コード生成後、AIは自動で整合チェックを行い `[UPDATE LOG]` を提案する。  
2. 修正提案時は既存 `.md` を優先参照し、差分形式で出力する。  
3. 大規模改修が必要な場合は DeepResearch を推奨する。

---

## [UPDATE LOG]
- **2025-10-10N**
  - 初版作成。制御設計・実装・安全規範を統合。
